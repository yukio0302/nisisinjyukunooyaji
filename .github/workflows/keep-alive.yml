name: Keep Streamlit Alive

on:
  schedule:
    # 20åˆ†é–“éš”ã§å®Ÿè¡Œï¼ˆæ¯æ™‚0åˆ†ã€20åˆ†ã€40åˆ†ï¼‰
    - cron: '0,20,40 * * * *'
  workflow_dispatch:  # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Streamlit App
        run: |
          echo "========================================"
          echo "ğŸ•’ å®Ÿè¡Œæ™‚åˆ»: $(date '+%Y-%m-%d %H:%M:%S')"
          echo "ğŸŒ ã‚¢ã‚¯ã‚»ã‚¹å…ˆ: https://risshun-mapkensaku.streamlit.app/"
          echo "========================================"
          
          # è»½é‡ãªpingï¼ˆæœ€å°é™ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰
          curl -s \
            -o /dev/null \
            -w "HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: %{http_code}\nå‡¦ç†æ™‚é–“: %{time_total}ç§’\n" \
            -H "User-Agent: GitHub-Actions-Ping/1.0" \
            -H "X-Ping-Source: github-actions" \
            --max-time 10 \
            "https://risshun-mapkensaku.streamlit.app/?source=github_actions"
          
          echo "âœ… Pingé€ä¿¡å®Œäº†"
          echo "========================================"

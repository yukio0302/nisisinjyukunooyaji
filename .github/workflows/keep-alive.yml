# .github/workflows/keep-alive.yml
name: Keep Streamlit Alive

on:
  schedule:
    # 4åˆ†é–“éš”ã§å®Ÿè¡Œï¼ˆ30åˆ†ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’ç¢ºå®Ÿã«å›é¿ï¼‰
    - cron: '*/25 * * * *'
  workflow_dispatch:  # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Streamlit App
        run: |
          echo "ğŸ•’ ç¾åœ¨æ™‚åˆ»: $(date)"
          echo "ğŸŒ ã‚¢ã‚¯ã‚»ã‚¹å…ˆ: https://risshun-mapkensaku.streamlit.app/"
          
          # å®Œå…¨ãªãƒ–ãƒ©ã‚¦ã‚¶ã‚¢ã‚¯ã‚»ã‚¹ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
          curl -X GET \
            -H "User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36" \
            -H "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8" \
            -H "Accept-Language: ja,en-US;q=0.7,en;q=0.3" \
            -H "Cache-Control: no-cache" \
            -H "Pragma: no-cache" \
            -H "Connection: keep-alive" \
            --compressed \
            --silent \
            --output /dev/null \
            --write-out "HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: %{http_code}\n" \
            "https://risshun-mapkensaku.streamlit.app/"
          
          echo "âœ… Pingé€ä¿¡å®Œäº†"
